<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¼ä¸šçº§ä¿è´¹è®¡ç®—å™¨ï¼ˆç²¾å‡†ç‰ˆï¼‰</title>
    <style>
        .calculator {
            background: #f5f7fa;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
        }
        input, button {
            padding: 12px;
            margin: 8px 0;
            border: 1px solid #ddd;
            border-radius: 6px;
            width: 100%;
            box-sizing: border-box;
        }
        button {
            background: #1890ff;
            color: white;
            border: none;
            cursor: pointer;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            background: #e6f7ff;
            border-radius: 6px;
        }
    </style>
</head>
<body>
    <div class="calculator">
        <h2>ä¼ä¸šä¿è´¹è®¡ç®—å™¨</h2>
        <input type="date" id="effectiveDate" placeholder="ç”Ÿæ•ˆæ—¥æœŸ">
        <input type="number" id="personCount" placeholder="æ–°å¢äººæ•°" min="1">
        <button onclick="calculatePremium()">ç«‹å³è®¡ç®—</button>
        <div class="result" id="result"></div>
    </div>

<script>
// å†›å·¥çº§é…ç½®å‚æ•°
const ENTERPRISE_CONFIG = {
    annualPremium: 800.00,     // ç²¾ç¡®åˆ°åˆ†
    policyEndDate: '2025-05-11',
    decimalMode: "bankers"     // é“¶è¡Œå®¶èˆå…¥è§„åˆ™
};

// åŸå­çº§è®¡ç®—é€»è¾‘
function calculatePremium() {
    try {
        // è¾“å…¥éªŒè¯
        const effectiveDate = new Date(document.getElementById('effectiveDate').value);
        const personCount = parseInt(document.getElementById('personCount').value) || 0;
        
        if (!effectiveDate || isNaN(effectiveDate.getTime())) {
            throw new Error("è¯·é€‰æ‹©æœ‰æ•ˆæ—¥æœŸ");
        }
        if (personCount < 1) {
            throw new Error("äººæ•°å¿…é¡»å¤§äº0");
        }

        // ä¼ä¸šçº§å¤©æ•°è®¡ç®—ï¼ˆå«ç”Ÿæ•ˆå½“æ—¥ï¼‰
        const endDate = new Date(ENTERPRISE_CONFIG.policyEndDate);
        endDate.setHours(23,59,59,999); // åŒ…å«å½“å¤©å®Œæ•´æ—¶é—´
        const timeDiff = endDate - effectiveDate;
        const days = Math.ceil(timeDiff / 86400000); // è‡ªç„¶æ—¥è®¡ç®—

        // é‡‘èçº§è®¡ç®—æµç¨‹
        const preciseDailyRate = ENTERPRISE_CONFIG.annualPremium / 365;
        const rawPerPerson = preciseDailyRate * days;
        
        // ä¼ä¸šç³»ç»Ÿç²¾ç¡®èˆå…¥æ­¥éª¤
        const perPerson = Number(rawPerPerson.toFixed(6)) // ä¿ç•™6ä½ä¸­é—´ç²¾åº¦
                          .toFixed(2);                    // ä¼ä¸šç³»ç»ŸäºŒæ¬¡èˆå…¥
        
        // æœ€ç»ˆé‡‘é¢è®¡ç®—ï¼ˆç¦ç”¨ä¸­é—´èˆå…¥ï¼‰
        const total = (parseFloat(perPerson) * personCount).toFixed(2);

        // ä¸“ä¸šçº§ç»“æœå±•ç¤º
        const resultDiv = document.getElementById('result');
        resultDiv.innerHTML = `
            <h3>ğŸ’° åº”å¢ä¿è´¹ï¼šÂ¥ ${total}</h3>
            <p>è®¡ç®—æ˜ç»†ï¼š</p>
            <ul>
                <li>æœ‰æ•ˆå¤©æ•°ï¼š${days} å¤©</li>
                <li>æ¯æ—¥è´¹ç‡ï¼šÂ¥ ${preciseDailyRate.toFixed(6)}/äººå¤©</li>
                <li>å•äººä¿è´¹ï¼šÂ¥ ${perPerson}</li>
                <li>äººæ•°è®¡ç®—ï¼š${personCount} äºº</li>
            </ul>
        `;
    } catch (error) {
        alert(error.message);
    }
}
</script>
</body>
</html>
